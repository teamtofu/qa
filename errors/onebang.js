/*!
 * Copyright (c) 2017 Russell Steadman
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
 * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
 * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE
 * OR OTHER DEALINGS IN THE SOFTWARE.
 */
!function(){"use strict";var t,e={o:"object",s:"string",f:"function",b:"boolean",n:"number",r:"regex"},n={},o=function(){var t={angular:typeof angular===e.o&&!!angular,console:!!(typeof console===e.o&&console&&console.log&&console.error&&console.info),alert:typeof alert===e.f&&!!alert,document:typeof document===e.o&&!!document,body:typeof document===e.o&&!!document&&typeof document.body===e.o&&!!document.body,mutation:typeof MutationObserver===e.f&&!!MutationObserver,interval:typeof setInterval===e.f&&typeof clearInterval===e.f&&!!setInterval&&!!clearInterval,window:typeof window===e.o&&!!window,module:"undefined"!=typeof module&&module.exports};for(var o in t){n[o]=t[o]}return n};!function(){var e=[],n=!1,o=!1;t=function(t,i){var r=function(){if(!n){n=!0;for(var t=0;t<e.length;t++){e[t].fn.call(this,e[t].ctx)}e=[]}}.bind(i),a=function(){"complete"===document.readyState&&r()};if("function"!=typeof t){throw new TypeError("callback for docReady(fn) must be a function")}if(n){return void setTimeout(function(){t.bind(i)()},1)}e.push({fn:t,ctx:i}),"complete"===document.readyState?setTimeout(r,1):o||(document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):(document.attachEvent("onreadystatechange",a),window.attachEvent("onload",r)),o=!0)}}();var i=function(t,e,n,o){return"http://teamtofu.github.io/onebang/errors/?error="+t+"&one="+encodeURIComponent(e)+"&two="+encodeURIComponent(n)+"&three="+encodeURIComponent(o)},r=[{regex:/^\_\_.*$/,len:2,id:"__"},{regex:/^b\_.*$/,len:2,id:"b_"},{regex:/^B\_.*$/,len:2,id:"B_"},{regex:/^!.*$/,len:1,id:"!"},{regex:/^\:\:.*$/,len:2,id:"::"},{regex:/^1.*$/,len:1,id:"1"}],a=function(t,e){var n=e.getAttribute("class");n=n?n.split(" "):[];for(var o in t){-1===n.indexOf(t[o])&&n.push(encodeURIComponent(t[o]))}e.setAttribute("class",n.join(" ").trim())},s=function(t,n,o){var i="onebang_isolate",a=o.getAttribute(i)?o.getAttribute(i).split(" "):[],s=typeof o.getAttribute(n+t)===e.s?n+t:null;if(s){a.push(s)}else{for(var u in r){if(s=typeof o.getAttribute(r[u].id+t)===e.s?r[u].id+t:null){a.push(s);break}}}o.removeAttribute(s),o.setAttribute(i,a.join(" "))},u={console:function(t){for(var e in t){o().console&&console.log(t[e])}},class:function(t){a(t,this)},c:"class",hash:function(t){var n=this.getAttribute("href");n=typeof n===e.s?n.split("#"):["",""],n[1]=t[0]?t[0]:"",this.setAttribute("href",n.join("#"))},"#":"hash",icon:function(t){switch(t[0]){case"fa":case"fontawesome":a(["fa","fa-"+t[1],t[2]?"fa-"+t[2]+"x":"",t[3]?"fa-spin":""],this);break;case"ion":case"ionicon":a(["ion","icon","ion-"+t[1]],this);break;case"gly":case"glyph":case"glyphicon":a(["glyphicon","glyphicon-"+t[1]],this);break;case"oi":case"openicon":a(["oi","oi-"+t[1]],this)}},i:"icon",id:function(t){t[0]?this.setAttribute("id",t[0]):this.removeAttribute("id")},exclaim:function(t,n,o,r){if(typeof n===e.o&&n){var s=[];n.default||(n.default="");for(var u in t){-1===s.indexOf(t[u]?n[t[u]]:n.default)&&(t[u]?n[t[u]]?s.push(n[t[u]]):r(i("ai",t[u])):s.push(n.default))}t[0]||s.push(n.default),a(s,this)}},"!":"exclaim",style:function(t,e,n,o){if(!t[0]||!t[1]){return o(i("aj"))}this.style[t[0]]=t[1].replace(/\_/g," ")},s:"style",hide:function(){this.style.display="none"}},f=function(t){return"hex"===t[0]?"#"+t[1]:"rgb"===t[0]?"rgb("+t[1]+","+t[2]+","+t[3]+(t[4]?","+t[4]:"")+")":t[0]||"#000000"},c={h:"height",w:"width",hmin:"min-height",wmin:"min-width",hmax:"max-height",wmax:"max-width",cen:"center",clr:"color",bgclr:"background-color",ma:"margin",mal:"margin-left",mar:"margin-right",mat:"margin-top",mab:"margin-bottom",pa:"padding",pal:"padding-left",par:"padding-right",pat:"padding-top",pab:"padding-bottom",center:function(){this.style["text-align"]="center",this.style.display="block",this.style["margin-left"]="auto",this.style["margin-right"]="auto"},color:function(t){this.style.color=f(t)},"background-color":function(t){this.style["background-color"]=f(t)}},d=["margin","margin-top","margin-bottom","margin-left","margin-right","padding","padding-top","padding-bottom","padding-left","padding-right","position","display","opacity","height","min-height","max-height","width","min-width","max-width"];for(var l in d){!function(t){c[t]=function(e){this.style[t]=e.join(" ")}}(d[l])}var h={youtube:function(t,e,n,o){var r=this.getAttribute("ytid");for(var a in e){t[0]&&t[0]===a&&"none"!==t[0]&&(r=e[a])}if(!r||!/[a-zA-Z0-9_-]{8,12}/.test(r)){return o(i("al"))}var s='<iframe type="text/html" width="'+(t[2]?t[2]:"640")+'" height="'+(t[1]?t[1]:"360")+'" ';s+='src="https://www.youtube.com/embed/'+r+'" allowfullscreen="" frameborder="0"></iframe>',this.innerHTML=s},yt:"youtube"},p=function(a){this.version="1.0.3",this.options={developerMode:!1,debugMode:!1,userBang:"!",userBangRegex:/^\!.*$/,userConnector:":",userConnectorRegex:/\:/g,functions:{},angular:!1,removeBangPrefixes:[]};var f={developerMode:e.b,debugMode:e.b,userBang:e.s,userBangRegex:e.o+"&"+e.r,userConnector:e.s,userConnectorRegex:e.o+"&"+e.r,functions:e.o,angular:e.b,removeBangPrefixes:e.o};if(n.settings=typeof a===e.o&&!!a,o().settings){for(var d in a){this.options[d]=a[d]}}for(var l in f){if(-1===f[l].split("&").indexOf(typeof this.options[l])){throw new Error(i("ah",l,typeof this.options[l],f[l]))}}for(var p in this.options.removeBangPrefixes){for(var g in r){if(this.options.removeBangPrefixes[p]===r[g].id){r=r.splice(g,1);break}}}this.events=[];var b=function(t){o().console?console.error("(OneBang) "+t):typeof alert===e.f&&this.options.developerMode&&alert(t),this.events.push(t)}.bind(this),m=function(t){o().console&&this.options.debugMode&&console.info("(OneBang) "+t),this.events.push(t)}.bind(this);t(function(){o().document?o().body||b(i("ab")):b(i("aa"))},this);var v;o().mutation?v=new MutationObserver(function(){this.interpret()}.bind(this)):b(i("ac"));var y=function(t){var e=t.childNodes;for(var n in e){y(e[n])}w(t)}.bind(this),w=function(t){var e=t.attributes;if(e){var n=[];for(var o in e){var i=e[o].name;if(this.options.userBangRegex.test(i)){n.push(i.substr(this.options.userBang.length))}else{for(var a in r){if(r[a].regex.test(i)){n.push(i.substr(r[a].len));break}}}}x(t,n)}}.bind(this),x=function(t,n){for(var a in n){var u=n[a].split(this.options.userConnector),f=u[0];if(u.splice(0,1),""===n[a]){return}for(;typeof this.q[f]===e.s;){f=this.q[f]}if(typeof this.q[f]===e.f){var c=this.options.functions[f];try{this.q[f]&&this.q[f].bind(t)(u,c||{},this.version,b,m)}catch(t){b('Function "'+f+'" from "'+n[a]+'" failed.'),o().console&&console.error(t)}t.removeAttribute(this.options.userBang+n[a]);for(var d in r){t.removeAttribute(r[d].id+n[a])}}else{s(n[a],this.options.userBang,t),b(i("ad",n[a],f))}}}.bind(this);this.q={};var B=[u,c,h],A=function(){for(var t in B){for(var n in B[t]){this.q[n]=B[t][n]}}for(var o in this.q){typeof this.q[o]!==e.f||this.options.functions[o]||(this.options.functions[o]={})}}.bind(this);A(),this.addplugin=function(t,e){var n={};n[t]=e,B.push(n),A()},this.addplugins=function(t){B.push(t),A()},this.interpret=function(t){return t=t||document.body,y(t),t},t(function(){this.interpret(document.body)},this),typeof v===e.o&&t(function(){v.observe(document.body,{attributes:!0,childList:!0,subtree:!0})},this);var k=null;this.interval=function(t){o().interval?typeof t!==e.n&&null===k?(clearInterval(k),k=null,m("Interval-based updates were stopped.")):typeof t===e.n&&t>0?(k=setInterval(function(){this.interpret(document.body)}.bind(this),t),m("Interval-based updates were started.")):b(i("ae")):b(i("af"))}};if(o().angular){var g=angular.module("oneBang",[]);g.factory("$oneBang",function(){var t=function(t){return t=typeof t===e.o&&t?t:{},t.angular=!0,typeof window.onebang===e.f&&window.onebang(t),window.onebang};return function(e){return t(e)}});var b=function(){return{link:function(t,n){typeof n[0]===e.o&&(n=n[0]),window.onebang.interpret(n)}}},m=["!","bang","::"];for(var v in m){g.directive(m[v],b)}}var y=function(t){window.onebang=new p(t)},w=function(t){return typeof window.onebang===e.f&&y.bind(this)(t),null};if(!o().window){throw new Error("(OneBang) "+i("ag"))}window.onebang=y.bind(this),o().module&&(module.exports=w.bind(this))}();